\documentclass{article}

% Set different paper sizes for small and large displays.
\ifdefined\mini
    \usepackage[a6paper]{geometry}
\else
    \usepackage[a4paper]{geometry}
\fi

% Do not indent paragraphs and insert blank space between paragraphs.
\usepackage{parskip}
\usepackage{listings}
\usepackage{textcomp}
\usepackage[svgnames]{xcolor}

\lstdefinestyle{plainstyle}{
    basicstyle=\ttfamily,
    columns=fullflexible,
    keepspaces=true,
    upquote=true,
    moredelim=*[is][\itshape]{<<}{>>},
}
\lstdefinestyle{ministyle}{
    % \normalfont lets 48 columns to fit in a6paper.
    % \small lets 53 columns to fit in a6paper.
    % \footnotesize lets 59 columns to fit in a6paper.
    % \scriptsize lets 68 columns to fit in a6paper.
    % \tiny lets 95 columns to fit in a6paper.
    basicstyle=\ifdefined\mini \small \fi \ttfamily,
}
\lstdefinestyle{xministyle}{
    basicstyle=\ifdefined\mini \footnotesize \fi \ttfamily,
}
\lstdefinestyle{colorstyle}{
    showstringspaces=false,
    commentstyle=\color{DarkGreen},
    keywordstyle=\color{DarkBlue},
    identifierstyle=\color{Purple},
    stringstyle=\color{Maroon},
}
\lstnewenvironment{code}{
    \lstset{
        style=plainstyle,
        style=ministyle,
    }
}{}
\lstnewenvironment{xminicode}{
    \lstset{
        style=plainstyle,
        style=xministyle,
    }
}{}
\lstnewenvironment{fortran77}{
    \lstset{
        language=[77]fortran,
        style=plainstyle,
        style=ministyle,
        style=colorstyle,
    }
}{}

\newcommand{\inlinefortranss}[1]{%
    \lstinline[
        language={[77]fortran},
        style=plainstyle,
        style=colorstyle,
    ]{#1}%
}

\newcommand{\inlinekeyword}[1]{%
    \lstinline[
        language={[77]fortran},
        style=plainstyle,
        style=colorstyle,
        commentstyle=\color{DarkBlue},
    ]{#1}%
}

\newcommand{\inlineidentifier}[1]{%
    \lstinline[
        language={[77]fortran},
        style=plainstyle,
        style=colorstyle,
        commentstyle=\color{Purple},
    ]{#1}%
}

\newcommand{\inlinecode}[1]{%
    \lstinline[style=plainstyle]{#1}%
}

% Remove ugly border around links and color links blue.
\usepackage[colorlinks=true,linkcolor=black,urlcolor=blue]{hyperref}

\newcommand{\footer}{
    \medskip
    \textit{Copyright \textcopyright{} 1995-7 by Stanford University.
            \ifdefined\mini\\*\fi All rights reserved.}
}

\newcommand{\newsection}[1]{
    \input{#1}
    
    \footer
    \newpage
}

\title{Fortran 77 Tutorial}
\author{
    Erik Bowman \\
    Sarah T. Whitelock \\
    Paul H. Hargrove \\
}
\date{}

\begin{document}

% Title page.
\pagenumbering{gobble}
\maketitle
\thispagestyle{empty}
\begin{center}
\small
Typeset in \LaTeX{} by Susam Pal

Version 0.1.0 (2019-06-07)
\end{center}
\newpage

% Contents page.
{
    \ifdefined\mini\small\fi
    \tableofcontents
}
\newpage

% Sections.
\newsection{00_test}
\pagenumbering{arabic}
\newsection{01_preface}
\newsection{02_whatis}
\newsection{03_basics}
\newsection{04_unix}
\newsection{05_variables}
\newsection{06_expressions}
\newsection{07_logical}

\end{document}
